# Chapter 1: 画像を出力する (Outputting an Image)

グラフィックスプログラミングの最初のステップは、計算結果を「目に見える形」にすることです。
Consoleへの `Hello, World!` ではなく、画像ファイルとしての `Hello, World!` を作りましょう。

## 🎯 目標

*   ラスタスキャン (Raster Scan) の概念を理解する。
*   ピクセルごとの色計算を行う。
*   計算結果を画像ファイルとして保存する。

## 🧠 概念: ラスタスキャンと座標系

モニタ上の画像はピクセル（画素）のグリッドです。
左上の `(0, 0)` から始まり、右へ進み、端まで行ったら次の行へ…という順序で処理します。

### 問いかけ 1:
あなたは現在、コード内で `u` と `v` という変数を使っていますね。
*   画素の座標 `(x, y)` (整数) と、論理的な座標 `(u, v)` (0.0〜1.0の実数) の違いは何ですか？
*   なぜ `y` 座標を反転させている (`1.0 - ...`) のですか？

(答えを考えることで、レンダラーの座標系への理解が深まります)

## 🦀 Rustの実装ポイント

あなたは `image` クレートを使用しています。これは現代的な選択です（本家テキストは単純なPPMテキスト形式を使いますが、実用性はこちらが上です）。

### コードレビュー (現状の確認)

`main.rs` を見ると、以下のループがあります：

```rust
for y in 0..image_height {
    for x in 0..image_width {
        let u = x as f64 / (image_width - 1) as f64;
        let v = 1.0 - (y as f64 / (image_height - 1) as f64);
        // ...
    }
}
```

*   **Good**: `f64` へのキャストが明示的です。
*   **Challenge**: `image_width` が整数の場合、割り算の分母が `0` になる可能性はありますか？（今回は定数なので大丈夫ですが、常に「ゼロ除算」の可能性を意識しましょう）

## 📝 課題 (Action Item)

現在、あなたの `main.rs` は美しいグラデーションを出力できています。
この章の実装は **完了** とみなして良いでしょう。

しかし、次の章に進む前に一つだけ修正してほしい点があります。
現在は `main.rs` に直接計算ロジックを書いていますが、次の章で作る `Vec3` クラスを使ってこれを書き直す必要があります。

さあ、次はグラフィックスの要、**`Vec3` クラスの実装** (`02_vec3.md`) へ進んでください。
